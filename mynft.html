


<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MyNFT</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>


<style>
/* 教程弹窗样式 */
.tutorial-btn {
    margin-right: 10px;
    padding: 3px 6px;
    background-color: #007bff;
    color: rgb(244, 242, 242);
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
.tutorial-modal {
    display: none;
    position: fixed;
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 600px;
    max-height: 80%;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 8px;
    overflow-y: auto;
    padding: 20px;
    z-index: 1000;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}
.tutorial-modal h3 {
    margin-top: 0;
}
.close-tutorial {
    position: absolute;
    top: 10px;
    right: 15px;
    cursor: pointer;
    font-size: 20px;
    font-weight: bold;
}
.tutorial-step {
    margin-bottom: 10px;
}
.step-toggle {
    width: 100%;
    text-align: left;
    background: #f0f0f0;
    border: none;
    padding: 8px;
    cursor: pointer;
    font-weight: bold;
    border-radius: 4px;
}
.step-content {
    display: none;
    padding: 8px 12px;
    background: #fafafa;
    border-left: 2px solid #007bff;
    margin-top: 4px;
    border-radius: 4px;
}
.step-content pre {
    background: #eee;
    padding: 8px;
    border-radius: 4px;
    overflow-x: auto;
}
</style>
</head>
<body>
<header>
    <h1>MyNFT Collection</h1>
    <nav>
        <button class="tutorial-btn" id="showTutorialBtn">上链教程</button>
        <button id="changeWalletBtn">更换钱包</button>
        <a href="market.html">Marketplace</a>
        <a href="mynft.html" class="active">MyNFT</a>
    </nav>
</header>

<main>
    <!-- 上传 NFT 表单 -->
    <section class="upload">
        <h3>Upload NFT</h3>
        <form id="uploadForm">
            <input type="text" id="nftTitle" placeholder="NFT Title" required>
            <input type="text" id="nftImage" placeholder="Image URL (optional, for preview)">
            <input type="text" id="nftStory" placeholder="Short Story" required>
            <input type="number" step="0.01" id="nftPrice" placeholder="Price (ETH)" required>
            <select id="nftType">
                <option value="Fixed Price">Fixed Price</option>
                <option value="Auction">Auction</option>
                <option value="Bundle">Bundle</option>
            </select>
            <input type="number" id="nftRoyalty" placeholder="Royalty %" required>
            <!-- 修改 placeholder 更直观 -->
            <input type="text" id="nftMetadata" placeholder="Metadata JSON URL (例如 https://xxx.myfilebase.com/ipfs/Qm...)" required>
            <button type="submit">LazyMint NFT</button>
        </form>
    </section>

    <!-- NFT 列表 -->
    <section>
        <h3>一级市场（链下市场 / 懒铸造 / off-chain）</h3>
        <div id="primaryNFTs" class="nft-grid"></div>

        <h3>二级市场（链上市场 / Gas费 / on-chain）</h3>
        <div id="secondaryNFTs" class="nft-grid"></div>

        <div class="pagination">
            <button id="prevMyPage">Prev</button>
            <span id="myPageInfo"></span>
            <button id="nextMyPage">Next</button>
        </div>
    </section>
</main>

<!-- 教程弹窗 -->
<!-- 教程弹窗 -->
<div class="tutorial-modal" id="tutorialModal">
    <span class="close-tutorial" id="closeTutorialBtn">&times;</span>
    <h3>📚 NFT 上传教程（详细版）</h3>

    <!-- 市场机制简短介绍 -->
    <div class="tutorial-intro">
        <p><strong>一级市场（懒铸造 / 链下市场）</strong>：无需支付链上费用，生成 <code>Voucher</code> 即可，作品还未真正写入区块链。</p>
        <p><strong>二级市场（链上市场）</strong>：当 NFT 被铸造上链（拥有 <code>token_id</code> 且 <code>voucher</code> 状态为 used），才进入二级市场，需要真实区块链交易。</p>
        <p><strong>LazyMint（懒铸造）</strong>：先签名生成凭证，等到真正买家购买时才执行链上交易，从而节省 Gas 费用。</p>
    </div>

    <!-- 新增视频教程入口 -->
    <div class="tutorial-step">
        <button class="step-toggle">🎥 视频教程（推荐先看）</button>
        <div class="step-content">
            <p>我们准备了一段完整的视频演示，带你从上传图片到生成 NFT。</p>
            <p><a href="https://your-video-link.com" target="_blank">👉 点击这里打开视频教程</a></p>
            <p><strong>提示：</strong>视频教程适合新手，能避免大多数易错点。</p>
        </div>
    </div>

    <!-- 步骤 1 -->
    <div class="tutorial-step">
        <button class="step-toggle">步骤 1：准备图片</button>
        <div class="step-content">
            <p>✅ 选择你想铸造的图片，并保存到本地。</p>
            <p>✅ 推荐图片大小：<strong>512x512px ~ 1024x1024px</strong>，格式 <code>PNG</code> 或 <code>JPG</code>。</p>
            <p>⚠️ 易错点：图片文件名不要用中文或空格，推荐命名为 <code>my_nft.png</code>。</p>
        </div>
    </div>

    <!-- 步骤 2 -->
    <div class="tutorial-step">
        <button class="step-toggle">步骤 2：上传到 Filebase/IPFS</button>
        <div class="step-content">
            <p>1. 登录 <a href="https://filebase.com/" target="_blank">Filebase 官网</a>，注册账号。</p>
            <p>2. 创建一个 <strong>Bucket</strong>，并上传你的图片。</p>
            <p>3. 上传完成后，你会得到一个 <code>IPFS CID</code>。</p>
            <p>例如：<code>QmShhDFiDoj7s9vANpdXKoSfuogDuBM2wX9SroKHrdQ25p</code></p>
            <p>访问地址可能类似：<br>
               <code>https://loud-olive-rook.myfilebase.com/ipfs/QmShhDFiDoj7s9vANpdXKoSfuogDuBM2wX9SroKHrdQ25p</code></p>
            <p>⚠️ 易错点：<br>
               - 不能填本地路径 <code>C:\Users\xx\my_nft.png</code><br>
               - 最稳定的是用 <code>https://.../ipfs/CID</code> 网关链接。</p>
        </div>
    </div>

    <!-- 步骤 3 -->
    <div class="tutorial-step">
        <button class="step-toggle">步骤 3：生成 JSON Metadata</button>
        <div class="step-content">
            <p>在本地新建 <code>my_nft.json</code>，内容示例如下：</p>
            <pre>{
 "name": "A cute girl's childhood time",
 "description": "A little girl focused and engrossed",
 "image": "ipfs://QmShhDFiDoj7s9vANpdXKoSfuogDuBM2wX9SroKHrdQ25p",
 "attributes": [
   {"trait_type": "Story", "value": "Looking Back on Childhood"}
 ]
}</pre>
            <p>⚠️ 易错点：<br>
               - <code>image</code> 必须是你刚才上传的图片的 CID。<br>
               - JSON 内不能多逗号，字段必须是英文。<br>
               - 名称、描述可自定义，但要有意义。</p>
            <p>再把 JSON 上传到 Filebase，得到 JSON 链接（即 <code>token_uri</code>），类似：<br>
               <code>https://loud-olive-rook.myfilebase.com/ipfs/QmVLa9bx8LeuxkudadekgHs4YKByALLL9kB5GJZNwvdeNE</code></p>
        </div>
    </div>

    <!-- 步骤 4 -->
    <div class="tutorial-step">
        <button class="step-toggle">步骤 4：填入 NFT 表单</button>
        <div class="step-content">
            <p>1. 在表单中填写：</p>
            <ul>
                <li>标题（Title）</li>
                <li>价格（Price, ETH）</li>
                <li>类型（Fixed / Auction / Bundle）</li>
                <li>分成比例（Royalty %）</li>
                <li><strong>Metadata JSON URL</strong>：粘贴刚才的 JSON 链接</li>
            </ul>
            <p>例如：<br>
               <code>https://loud-olive-rook.myfilebase.com/ipfs/QmVLa9bx8LeuxkudadekgHs4YKByALLL9kB5GJZNwvdeNE</code></p>
            <p>2. 点击 <strong>LazyMint NFT</strong> 按钮，即可生成 Voucher。</p>
            <p>⚠️ 易错点：不要把图片地址填在这里！必须填 JSON 文件地址。</p>
        </div>
    </div>
</div>


<script src="script.js"></script>
<script>
    // initMyNFT(); // 初始化 MyNFT 页面

    // 教程弹窗显示/关闭
    const tutorialModal = document.getElementById('tutorialModal');
    document.getElementById('showTutorialBtn').addEventListener('click', () => {
        tutorialModal.style.display = 'block';
    });
    document.getElementById('closeTutorialBtn').addEventListener('click', () => {
        tutorialModal.style.display = 'none';
    });

    // 教程步骤展开/收起
    document.querySelectorAll('.step-toggle').forEach(btn => {
        btn.addEventListener('click', () => {
            const content = btn.nextElementSibling;
            content.style.display = content.style.display === 'block' ? 'none' : 'block';
        });
    });
</script>
</body>
</html>
